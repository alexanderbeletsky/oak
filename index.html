<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Oak by amirrajan</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <script src="javascripts/swfobject.js"></script>
    <script type="text/javascript">
	         swfobject.registerObject("csSWF", "9.0.115", "expressInstall.swf");
      </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/amirrajan/Oak">Fork On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/amirrajan/Oak/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/amirrajan/Oak/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Oak</h1>
          <p>Bring dynamic goodness and frictionless development to ASP .NET MVC</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/amirrajan">amirrajan</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span><br/>
          <span class="credits right" xmlns:cc="http://creativecommons.org/ns#" about="urn:sha1:7YSJHD4MV4HVBH4HFDWXIBSDCKFX5UAQ">Screencast music by
              <a rel="cc:attributionURL" property="cc:attributionName" href="http://ccmixter.org/files/grapes/16626"> grapes</a> / <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></span>
        </div>

        <h2>What is Oak?</h2>
        <p style="font-size: 20px">Oak is a suite of contructs that brings the <b>power of dynamic typing and frictionless development</b> to ASP.NET MVC (it can be used outside of MVC too).</p>
        
<h2>First Time (Prerequisites)</h2>
<ul>
<li>Install <a href="http://www.microsoft.com/download/en/details.aspx?id=1038">IIS Express</a>
</li>
<li>Install <a href="http://rubyinstaller.org/downloads/">ruby 1.9.2</a>
</li>
<li>Install the following gems using a command prompt that supports ruby:
<pre>
gem install bundler
gem install warmup
</pre>
</li>
</ul>

<h2>Optional First Time (Prerequisites for Growl Support)</h2>
<ul>
  <li><a href="http://www.growlforwindows.com/gfw/">Install Growl For Windows</a></li>
  <li><a href="http://softwarebakery.com/frozencow/translucentdark.html">Download the Translucent Dark Theme for Growl</a></li>
  <li>Extract the Theme to: C:\Users\%USER%\AppData\Local\Growl\2.0.0.0\Displays\TranslucentDark</li>
  <li>Start Growl and set it to the Translucent Dark Theme: <a href="http://i.imgur.com/buWyf.png">Here are the settings that I like</a></li>
</ul>

<h2>Bootstrap Your Own App With Oak</h2>
<ul>
<li>Run the following commands:
<pre>
warmup <a href="http://github.com/amirrajan/loam">http://github.com/amirrajan/loam</a> Blog (creates a .Net solution)
=== OR if you want a solution that includes UI Automation ===
warmup <a href="http://github.com/amirrajan/loam">http://github.com/amirrajan/walkingskeleton</a> Blog
cd Blog
bundle install (installs any ruby gems needed)
rake (builds the .net app)
rake server (starts iis express)
start Blog.sln (opens the solution)
watchr dotnet.watchr.rb (starts your feedback loop)
</pre>
</li>
</ul>

<h3><a href="#sampleapps">Jump to the Sample Apps</a></h3>
<br />
<h1>It's all about reducing friction</h1>
<hr/>

<h2>Frictionless Development Cycle - Oak's Walking Skeleton</h2>
<p>Oak has an addicting development life cycle that incorporates rapid application development, fast feedback loops, testing, and UI automation. Watch the video to see Oak in action:</p>
<div id="media">
   <object id="csSWF" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="650" height="450">
      <param name="movie" value="WalkingSkeleton_controller.swf" />
      <param name="scale" value="showall" />
      <param name="bgcolor" value="#1a1a1a" />
      <param name="allowfullscreen" value="true" />
      <param name="allowscriptaccess" value="always" />
      <param name="flashvars" value="tocdoc=left&amp;showsearch=false&amp;autostart=false&amp;autohide=true&amp;xmp=WalkingSkeleton_config.xml&amp;content=WalkingSkeleton.mp4&amp;thumb=WalkingSkeletonFirstFrame.png&amp;containerwidth=1280&amp;containerheight=1024&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
      <!--[if !IE]>-->
      <object type="application/x-shockwave-flash" data="WalkingSkeleton_controller.swf" width="650" height="450">
         <param name="scale" value="showall" />
         <param name="bgcolor" value="#1a1a1a" />
         <param name="allowfullscreen" value="true" />
         <param name="allowscriptaccess" value="always" />
         <param name="flashvars" value="tocdoc=left&amp;showsearch=false&amp;autostart=false&amp;autohide=true&amp;xmp=WalkingSkeleton_config.xml&amp;content=WalkingSkeleton.mp4&amp;thumb=WalkingSkeletonFirstFrame.png&amp;containerwidth=1280&amp;containerheight=1024&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
      <!--<![endif]-->
         <div id="noUpdate">
             <p>The Camtasia Studio video content presented here requires JavaScript to be enabled and the latest version of the Adobe Flash Player. If you are using a browser with JavaScript disabled please enable it now. Otherwise, please update your version of the free Adobe Flash Player by <a href="http://www.adobe.com/go/getflashplayer">downloading here</a>. </p>
         </div>
      <!--[if !IE]>-->
      </object>
      <!--<![endif]-->
   </object>
  </div>

 <br/>

 <h2>Frictionless Data Access, Change Tracking and Validation - Oak's dynamic Entity Model: Cambium</h2>
 <p>Oak has a dynamic entity model called Cambium. Cambium makes validating, detecting changes, saving, retrieving, and defining associations ridiculously easy. Check out the <a href="https://github.com/amirrajan/Oak/tree/master/Sample%20Apps/">Sample Apps</a> and the <a href="https://github.com/amirrajan/oak/wiki">Wiki</a> for more info.  Here is a sneak peek at what Cambium can do:</p>
<div id="media">
   <object id="csSWF1" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="650" height="450">
      <param name="movie" value="Validations_controller.swf" />
      <param name="scale" value="showall" />
      <param name="bgcolor" value="#1a1a1a" />
      <param name="allowfullscreen" value="true" />
      <param name="allowscriptaccess" value="always" />
      <param name="flashvars" value="tocdoc=left&amp;showsearch=false&amp;autostart=false&amp;autohide=true&amp;xmp=Validations_config.xml&amp;content=Validations.mp4&amp;thumb=ValidationsFirstFrame.png&amp;containerwidth=1280&amp;containerheight=1024&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
      <!--[if !IE]>-->
      <object type="application/x-shockwave-flash" data="Validations_controller.swf" width="650" height="450">
         <param name="scale" value="showall" />
         <param name="bgcolor" value="#1a1a1a" />
         <param name="allowfullscreen" value="true" />
         <param name="allowscriptaccess" value="always" />
         <param name="flashvars" value="tocdoc=left&amp;showsearch=false&amp;autostart=false&amp;autohide=true&amp;xmp=Validations_config.xml&amp;content=Validations.mp4&amp;thumb=ValidationsFirstFrame.png&amp;containerwidth=1280&amp;containerheight=1024&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
      <!--<![endif]-->
         <div id="noUpdate">
             <p>The Camtasia Studio video content presented here requires JavaScript to be enabled and the latest version of the Adobe Flash Player. If you are using a browser with JavaScript disabled please enable it now. Otherwise, please update your version of the free Adobe Flash Player by <a href="http://www.adobe.com/go/getflashplayer">downloading here</a>. </p>
         </div>
      <!--[if !IE]>-->
      </object>
      <!--<![endif]-->
   </object>
  </div>

 <br/>
<div id="media">
 <object id="csSWF2" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="650" height="450">
    <param name="movie" value="Associations_controller.swf" />
    <param name="scale" value="showall" />
    <param name="bgcolor" value="#1a1a1a" />
    <param name="allowfullscreen" value="true" />
    <param name="allowscriptaccess" value="always" />
    <param name="flashvars" value="tocdoc=left&amp;showsearch=false&amp;autostart=false&amp;autohide=true&amp;xmp=Associations_config.xml&amp;content=Associations.mp4&amp;thumb=AssociationsFirstFrame.png&amp;containerwidth=1280&amp;containerheight=1024&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="Associations_controller.swf" width="650" height="450">
       <param name="scale" value="showall" />
       <param name="bgcolor" value="#1a1a1a" />
       <param name="allowfullscreen" value="true" />
       <param name="allowscriptaccess" value="always" />
       <param name="flashvars" value="tocdoc=left&amp;showsearch=false&amp;autostart=false&amp;autohide=true&amp;xmp=Associations_config.xml&amp;content=Associations.mp4&amp;thumb=AssociationsFirstFrame.png&amp;containerwidth=1280&amp;containerheight=1024&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
    <!--<![endif]-->
       <div id="noUpdate">
           <p>The Camtasia Studio video content presented here requires JavaScript to be enabled and the latest version of the Adobe Flash Player. If you are using a browser with JavaScript disabled please enable it now. Otherwise, please update your version of the free Adobe Flash Player by <a href="http://www.adobe.com/go/getflashplayer">downloading here</a>. </p>
       </div>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
 </object>
</div>


 <br/>
 <h3>You get all this:</h3>
<pre>
Blogs blogs = new Blogs(); //data access by convention
Comments comments = new Comments(); //data access by convention
dynamic blog = new Blog(); //new up a blog, validate, then save
blog.Name = "";
blog.IsValid(); //this would be false
blog.FirstError(); //this would return "Name is Required"
blog.Name = "Blog Name";
blog.Id = blogs.Insert(blog); //inserts into the database returns an Id
var comment = blog.Comments().New(new { Body = "new comment" });
comments.Insert(comment); //inserts comment into database
var firstComment = blog.Comments(discardCache: true).First();
firstComment.Body; //this is "new comment"
firstComment.Blog().Name; //this is "Blog Name"
dynamic anotherBlog = new Blog();
anotherBlog.Name = "Blog Name";
anotherBlog.IsValid(); //this would return false, Name must be unique
anotherBlog.FirstError(); //this would return "Name is taken"
</pre>
 <h3>By writing <b>just</b> this:</h3>
<pre>
<b>//data access</b>
public class Blogs : DynamicRepository 
{
    public Blogs() { Project = d =&gt; new Blog(d); }
}

<b>//data access</b>
public class Comments : DynamicRepository 
{ 
    public Comments() { Project = d =&gt; new Comment(d); }
}

public class Blog : DynamicModel
{
    <b>//validation, name is required and must be unique</b>
    IEnumerable&lt;dynamic&gt; Validates() {
        yield return new Presense("Name");
        yield return new Uniqueness("Name");
    }

    <b>//a blog has many comments</b>
    IEnumerable&lt;dynamic&gt; Associates() {
        yield return HasMany(comments);
    }

    Blogs blogs = new Blogs();
    Comments comments = new Comments();
    public Blog(object dto) : base(dto) { }
    public Blog() : base() { }
}

public class Comment : DynamicModel
{
    <b>//validation, body is required</b>
    IEnumerable&lt;dynamic&gt; Validates() {
        yield return new Presense("Body");
    }

    <b>//a comment belongs to a blog</b>
    IEnumerable&lt;dynamic&gt; Associates() {
        yield return BelongsTo(blogs);
    }

    Blogs blogs = new Blogs();
    public Comment(object dto) : base(dto) { }
    public Comment() : base() { }
}
</pre>

<h2>Frictionless Schema Generation - Oak's Seed</h2>
<p>Schema generation should be simple. Period.  Here's what simple looks like:</p>
<pre>
var seed = new Seed();

//create blogs table
seed.CreateTable("Blogs",
    seed.Id(), 
    //seed.Id() is an alias for 
    //new { Id = "int", Identity = true, PrimaryKey = "true" }
    new { Name = "nvarchar(255)" },
    new { Body = "nvarchar(max)", Default = "Lorem Ipsum" }
).ExecuteNonQuery(); 
//Seed's CreateTable method returns a string that's valid sql,
//ExecuteNonQuery will execute that string

//create comments table
seed.CreateTable("Comments",
    seed.Id(), 
    new { BlogId = "int", ForeignKey = "Blogs(Id)"
    new { Body = "nvarchar(max)", Nullable = false }
).ExecuteNonQuery();

//ad hoc
"drop table Foobar".ExecuteNonQuery();
</pre>

<h2>Frictionless Testing - NSpec and SpecWatchr</h2>
<p>Oak is bootstrapped with <a href="http://nspec.org" target="_blank">NSpec and SpecWatchr</a>.  Driving out your implementation with tests ensures that you have a maintainable code base.</p>

<h2>Frictionless UI Automation - Canopy</h2>
<p>Oak is bootstrapped with a UI automation framework called <a href="http://lefthandedgoat.github.com/canopy/" target="_blank">canopy</a>.  With the increased use of client side javascript, UI automation tools are absolutely necessary.  Canopy gives you a terse dsl written in F#.  Very easy to pick up!</p>

<h2>Frictionless Build Automation and Continuous Integration - RakeDotNet</h2>
<p>
  Oak comes installed with a suite of rake scripts that will build your solution, deploy your web app, run NSpec tests and run UI automation tests.  These scripts can be leveraged directly by your build servers.
</p>
<div id="sampleapps"></div>
<br/>
<br/>
<br/>
<br/>
<h1>Sample Apps</h1>
<hr/>
<h2>Explore the sample apps: <a href="https://github.com/amirrajan/Oak/tree/master/Sample%20Apps/DynamicBlog">DynamicBlog</a></h2>
<p>This is..you guessed it...a blogging app.</p>
<ul>
<li>Run the following commands:
<pre>
git clone <a href="https://github.com/amirrajan/Oak.git">https://github.com/amirrajan/Oak.git</a> (or download the zip)
cd "Oak\Sample Apps\DynamicBlog"
start DynamicBlog.sln
</pre>
</li>
<li>Update the connection strings in the Web.config and App.config to point to an existing database (or create a new one and update the connection strings accordingly).</li>
<li>Then run the commands:
<pre>
rake             (builds and deploys the application)
rake tests       (all tests should pass)
rake server      (this will start up iis express)
rake reset       (resets the database schema with no data)
rake sample      (adds sample data to the database)
start http://localhost:3000
</pre>
</li>
</ul>

<h2>Explore the sample apps: <a href="https://github.com/amirrajan/Oak/tree/master/Sample%20Apps/BattleShip">BattleShip</a></h2>
<p>This is a web based version of the game BattleShip.  Open up two browsers and start playing!</p>
<ul>
<li>Run the following commands:
<pre>
git clone <a href="https://github.com/amirrajan/Oak.git">https://github.com/amirrajan/Oak.git</a> (or download the zip)
cd "Oak\Sample Apps\BattleShip"
start BattleShip.sln
</pre>
</li>
<li>Update the connection strings in the Web.config and App.config to point to an existing database (or create a new one and update the connection strings accordingly).</li>
<li>Then run the commands:
<pre>
rake             (builds and deploys the application)
rake tests       (all tests should pass)
rake server      (this will start up iis express)
rake reset       (resets the database schema with no data)
rake sample      (adds sample data to the database)
start http://localhost:3000
</pre>
</li>
</ul>

<h2>Explore the sample apps: <a href="https://github.com/amirrajan/Oak/tree/master/Sample%20Apps/Crib">Crib</a></h2>
<p>This is a web applications that tracks consultants and when they roll off of a client engagement.  Consulting companies like <a href="http://improvingenterprises.com" target="_blank">Improving Enterprises</a> would use this app to manage their resource pool.</p>
<ul>
<li>Run the following commands:
<pre>
git clone <a href="https://github.com/amirrajan/Oak.git">https://github.com/amirrajan/Oak.git</a> (or download the zip)
cd "Oak\Sample Apps\Crib"
start Crib.sln
</pre>
</li>
<li>Update the connection strings in the Web.config and App.config to point to an existing database (or create a new one and update the connection strings accordingly).</li>
<li>Then run the commands:
<pre>
rake             (builds and deploys the application)
rake tests       (all tests should pass)
rake server      (this will start up iis express)
rake reset       (resets the database schema with no data)
rake sample      (adds sample data to the database)
start http://localhost:3000
</pre>
</li>
</ul>

<h2>Explore the Reference Implementation: <a href="https://github.com/amirrajan/Oak/tree/master/Sample%20Apps/BorrowedGames">Borrowed Games</a></h2>
<p>
  This is a full blown reference implementation that uses all aspects of Oak.  This is a website that allows a circle of friends to borrow games from each other.
</p>
<ul>
<li>Run the following commands
<pre>
git clone <a href="https://github.com/amirrajan/Oak.git">https://github.com/amirrajan/Oak.git</a> (or download the zip)
cd "Oak\Sample Apps\BorrowedGames"
start BorrowedGames.sln
</pre>
</li>
<li>Update the connection strings in the Web.config and App.config to point to an existing database (or create a new one and update the connection strings accordingly).</li>
<li>Then run the commands
<pre>
bundle install
rake             (builds and deploys the application)
rake regen_db    (this generates the schema for the db)
rake tests       (all tests should pass)
rake server      (this will start up iis express)
rake ui          (this will run ui tests, it requires <a href="http://seleniumhq.org/projects/webdriver/" target="_blank">selenium</a>)
rake reset       (deletes all records in the db)
rake sample      (adds sample data to the database)
start http://localhost:3000
</pre>
</li>
</ul>

<h2>More Stuff</h2>

<ul>
<li>MIT License</li>
<li>Head over to the <a href="https://github.com/amirrajan/oak/wiki">wiki</a> for additional details.</li>
<li>
<a href="https://github.com/amirrajan/Oak/tree/master/Sample%20Apps">Reference Implementations</a> are included, test driven, awesome </li>
<li>Built ground up <a href="https://github.com/amirrajan/Oak/tree/master/Oak.Tests">under test</a>
</li>
<li>Available via Nuget: <strong>install-package oak or install-package oak-edge</strong>
</li>
</ul>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>
